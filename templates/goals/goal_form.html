{% extends 'base.html' %}

{% block title %}{% if goal %}Edit Goal{% else %}Create New Goal{% endif %} - JaytiPargal.in{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="mb-3">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'goal_list' %}">Goals</a></li>
                    <li class="breadcrumb-item active">{% if goal %}Edit{% else %}Create{% endif %}</li>
                </ol>
            </nav>

            <div class="card shadow-sm">
                <div class="card-header bg-white py-3">
                    <h4 class="mb-0" style="color: var(--dusty-rose);">
                        {% if goal %}
                            <i class="fas fa-edit me-2"></i>Edit Goal
                        {% else %}
                            <i class="fas fa-plus-circle me-2"></i>Create New Goal
                        {% endif %}
                    </h4>
                </div>
                <div class="card-body p-4">
                    <form method="post">
                        {% csrf_token %}
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="role_category" class="form-label">Marketing Role</label>
                                <select class="form-select" id="role_category" name="role_category" required>
                                    <option value="">Select Role...</option>
                                    <option value="digital_marketing" {% if goal and goal.role_category == 'digital_marketing' %}selected{% endif %}>Digital Marketing</option>
                                    <option value="brand_management" {% if goal and goal.role_category == 'brand_management' %}selected{% endif %}>Brand Management</option>
                                    <option value="content_strategy" {% if goal and goal.role_category == 'content_strategy' %}selected{% endif %}>Content Strategy</option>
                                    <option value="market_research" {% if goal and goal.role_category == 'market_research' %}selected{% endif %}>Market Research</option>
                                    <option value="product_marketing" {% if goal and goal.role_category == 'product_marketing' %}selected{% endif %}>Product Marketing</option>
                                    <option value="social_media" {% if goal and goal.role_category == 'social_media' %}selected{% endif %}>Social Media</option>
                                    <option value="seo_sem" {% if goal and goal.role_category == 'seo_sem' %}selected{% endif %}>SEO/SEM</option>
                                    <option value="marketing_analytics" {% if goal and goal.role_category == 'marketing_analytics' %}selected{% endif %}>Marketing Analytics</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="experience_level" class="form-label">Experience Level</label>
                                <select class="form-select" id="experience_level" name="experience_level" required>
                                    <option value="">Select Level...</option>
                                    <option value="entry" {% if goal and goal.experience_level == 'entry' %}selected{% endif %}>Entry Level</option>
                                    <option value="mid" {% if goal and goal.experience_level == 'mid' %}selected{% endif %}>Mid Level</option>
                                    <option value="senior" {% if goal and goal.experience_level == 'senior' %}selected{% endif %}>Senior Level</option>
                                    <option value="leadership" {% if goal and goal.experience_level == 'leadership' %}selected{% endif %}>Leadership</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="time_horizon" class="form-label">Time Horizon</label>
                                <select class="form-select" id="time_horizon" name="time_horizon" required>
                                    <option value="">Select Timeline...</option>
                                    <option value="1year" {% if goal and goal.time_horizon == '1year' %}selected{% endif %}>1 Year</option>
                                    <option value="3year" {% if goal and goal.time_horizon == '3year' %}selected{% endif %}>3 Years</option>
                                    <option value="5year" {% if goal and goal.time_horizon == '5year' %}selected{% endif %}>5 Years</option>
                                    <option value="10year" {% if goal and goal.time_horizon == '10year' %}selected{% endif %}>10 Years</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="target_date" class="form-label">Target Date</label>
                                <input type="date" class="form-control" id="target_date" name="target_date" 
                                       value="{% if goal %}{{ goal.target_date|date:'Y-m-d' }}{% endif %}" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="title" class="form-label">Goal Title</label>
                            <input type="text" class="form-control" id="title" name="title" 
                                   value="{% if goal %}{{ goal.title }}{% endif %}" 
                                   placeholder="e.g., Become Senior Marketing Manager" required>
                        </div>

                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="4" 
                                      placeholder="Describe your goal in detail...">{% if goal %}{{ goal.description }}{% endif %}</textarea>
                        </div>

                        {% if goal %}
                        <div class="mb-3">
                            <label for="status" class="form-label">Status</label>
                            <select class="form-select" id="status" name="status">
                                <option value="active" {% if goal.status == 'active' %}selected{% endif %}>Active</option>
                                <option value="paused" {% if goal.status == 'paused' %}selected{% endif %}>Paused</option>
                                <option value="completed" {% if goal.status == 'completed' %}selected{% endif %}>Completed</option>
                                <option value="archived" {% if goal.status == 'archived' %}selected{% endif %}>Archived</option>
                            </select>
                        </div>
                        {% endif %}

                        <div class="alert alert-info">
                            <i class="fas fa-magic me-2"></i>
                            <strong>AI Task Generation:</strong> When you save this goal, our AI will automatically generate personalized tasks broken down by department (Strategy, Finance, HR, Operations, Sales).
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                            <a href="{% url 'goal_list' %}" class="btn btn-outline-secondary">
                                <i class="fas fa-times me-2"></i>Cancel
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>{% if goal %}Update{% else %}Create Goal{% endif %}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
